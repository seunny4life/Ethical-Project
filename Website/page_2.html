<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCU Research Ethics Application Form - Section 2</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Link to custom CSS -->
    <link href="/Design/styles.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <h2 class="section-heading">SECTION 2 – PROJECT DESIGN AND METHODOLOGY</h2>
        <h4 class="text-center">
            Research Overview - (Please respect the indicated word counts in the following sections and explain
            all acronyms in full text the first time they appear).
        </h4>
        <br><br>
        <div class="form-container">
            <form id="designMethodologyForm" onsubmit="return validateForm()">
                <!-- Section 2.1 - Project Category -->
                <fieldset class="fieldset">
                    <legend>2.1 Select technologies involved in the project:</legend>
                    <div class="form-group">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="project-category"
                                value="smartphone-app" id="smartphone-app">
                            <label class="form-check-label" for="smartphone-app">Smartphone app</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="project-category" value="website"
                                id="website">
                            <label class="form-check-label" for="website">Website</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="project-category"
                                value="machine-learning" id="machine-learning">
                            <label class="form-check-label" for="machine-learning">Machine-learning</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="project-category" value="nlp"
                                id="nlp">
                            <label class="form-check-label" for="nlp">NLP</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="project-category" value="llms"
                                id="llms">
                            <label class="form-check-label" for="llms">LLMs</label>
                        </div>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.2 - Aims and Objectives -->
                <fieldset class="fieldset">
                    <legend>2.2 Please state the aims and objectives of the research project (max 200 words)</legend>
                    <div class="form-group">
                        <textarea class="form-control" id="aims-objectives" name="aims-objectives" rows="3"
                            required></textarea>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.3 - Hypothesis/Research Question -->
                <fieldset class="fieldset">
                    <legend>2.3 Please state the hypothesis and/or research question (in bullet points – max 100 words):
                    </legend>
                    <div class="form-group">
                        <textarea class="form-control" id="hypothesis" name="hypothesis" rows="2" required></textarea>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.4 - Methodology -->
                <fieldset class="fieldset">
                    <legend>2.4 Please state your overall methodology (max 400 words):</legend>
                    <div class="form-group">
                        <label><i>Include the tasks participants will be asked to do, estimated time commitment and the
                                methods of
                                analysis to be used</i></label>
                        <textarea class="form-control" id="methodology" name="methodology" rows="5" required></textarea>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.5 - Methods of Data Collection -->
                <fieldset class="fieldset">
                    <legend>2.5 Which of these are you doing in your project?</legend>
                    <div class="form-group">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="interviews"
                                id="interviews">
                            <label class="form-check-label" for="interviews"><i></i>Interviews or focus groups</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="surveys"
                                id="surveys">
                            <label class="form-check-label" for="surveys">Surveys/questionnaires</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="recordings"
                                id="recordings">
                            <label class="form-check-label" for="recordings">Audio/video recordings</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="observations"
                                id="observations">
                            <label class="form-check-label" for="observations">Public observations</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="public-office"
                                id="public-office">
                            <label class="form-check-label" for="public-office">Persons in public office</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="existing-data"
                                id="existing-data">
                            <label class="form-check-label" for="existing-data">Using existing data (including secondary
                                data)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection"
                                value="biological-samples" id="biological-samples">
                            <label class="form-check-label" for="biological-samples">Using human derived material
                                (biological samples)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection"
                                value="standard-tests" id="standard-tests">
                            <label class="form-check-label" for="standard-tests">Standard tests
                                (educational/personality, etc.)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection"
                                value="educational-practices" id="educational-practices">
                            <label class="form-check-label" for="educational-practices">Standard educational
                                practices</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="data-collection" value="other"
                                id="other-data-collection" onclick="toggleTextarea('other-data-collection-details')">
                            <label class="form-check-label" for="other-data-collection">Other (please specify)</label>
                            <textarea class="form-control mt-2" id="other-data-collection-details"
                                name="other-data-collection-details" style="display: none;"></textarea>
                        </div>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.6 - Participant Details -->
                <fieldset class="fieldset">
                    <legend>2.6 Participant Details:</legend>
                    <!-- a. Select who are the participants -->
                    <div class="form-group">
                        <label for="participants-group"><i>a. Select who are the participants in your study:</i></label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-group"
                                value="dcu-students" id="dcu-students">
                            <label class="form-check-label" for="dcu-students">DCU students</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-group" value="friends"
                                id="friends">
                            <label class="form-check-label" for="friends">Friends</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-group" value="family"
                                id="family">
                            <label class="form-check-label" for="family">Family</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-group" value="anyone"
                                id="anyone">
                            <label class="form-check-label" for="anyone">Anyone</label>
                        </div>
                    </div>
                    <br>
                    <!-- b. Age range for your participants -->
                    <div class="form-group">
                        <label for="participants-age"><i>b. What will be the age range for your
                                participants:</i></label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-age" value="18-60"
                                id="18-60">
                            <label class="form-check-label" for="18-60">18-60 i.e. Adults</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-age" value="60+"
                                id="60+">
                            <label class="form-check-label" for="60+">60+ i.e. Older Adults</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-age" value="16-18"
                                id="16-18">
                            <label class="form-check-label" for="16-18">16-18</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-age" value="12-16"
                                id="12-16">
                            <label class="form-check-label" for="12-16">12-16</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="participants-age" value="less-than-12"
                                id="less-than-12">
                            <label class="form-check-label" for="less-than-12">less than 12</label>
                        </div>
                    </div>
                    <br>
                    <!-- c. Demographics and characteristics for choosing participants -->
                    <div class="form-group">
                        <label for="choosing-demographics"><i>c. What demographics and characteristics will you use when
                                choosing your participants?</i></label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics" value="male"
                                id="male">
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics" value="female"
                                id="female">
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics" value="other"
                                id="other">
                            <label class="form-check-label" for="other">Other</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics" value="any"
                                id="any" onclick="toggleTextarea('gender-details')">
                            <label class="form-check-label" for="any">Any</label>
                            <textarea class="form-control mt-2" id="gender-details" name="gender-details" rows="2"
                                style="display: none;" placeholder="Specify gender details here..."></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics" value="race"
                                id="race" onclick="toggleTextarea('race-details')">
                            <label class="form-check-label" for="race">Race e.g. Caucasian</label>
                            <textarea class="form-control mt-2" id="race-details" name="race-details" rows="2"
                                style="display: none;" placeholder="Specify race details here..."></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics"
                                value="physical-characteristics" id="physical-characteristics"
                                onclick="toggleTextarea('physical-characteristics-details')">
                            <label class="form-check-label" for="physical-characteristics">Physical Characteristics e.g.
                                height, blood type, eye colour</label>
                            <textarea class="form-control mt-2" id="physical-characteristics-details"
                                name="physical-characteristics-details" rows="2" style="display: none;"
                                placeholder="Specify physical characteristics here..."></textarea>
                        </div>


                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="choosing-demographics"
                                value="no-demographics" id="no-demographics">
                            <label class="form-check-label" for="no-demographics">No particular demographics and
                                characteristics are required i.e. anybody can participate</label>
                        </div>
                    </div>
                    <br>
                    <!-- d. Demographics and characteristics for excluding participants -->
                    <div class="form-group">
                        <label for="excluding-demographics"><i>d. What demographics and characteristics will you use
                                when excluding potential participants?</i></label>
                        <textarea class="form-control mt-2" id="excluding-demographics" name="excluding-demographics"
                            rows="3"></textarea>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.7 - Recruitment Process -->
                <fieldset class="fieldset">
                    <legend>2.7 How will you recruit participants?</legend>
                    <div class="form-group">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="recruitment-method"
                                value="word-of-mouth" id="word-of-mouth"
                                onclick="toggleTextarea('word-of-mouth-details')">
                            <label class="form-check-label" for="word-of-mouth">Word of mouth e.g. tell friends, family,
                                colleagues</label>
                            <textarea class="form-control mt-2" id="word-of-mouth-details" name="word-of-mouth-details"
                                rows="2" placeholder="Specify details here..." style="display: none;"></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="recruitment-method" value="online"
                                id="online" onclick="toggleTextarea('online-details')">
                            <label class="form-check-label" for="online">Post it online e.g. on LinkedIn</label>
                            <textarea class="form-control mt-2" id="online-details" name="online-details" rows="2"
                                placeholder="Specify details here..." style="display: none;"></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="recruitment-method"
                                value="physical-location" id="physical-location"
                                onclick="toggleTextarea('physical-location-details')">
                            <label class="form-check-label" for="physical-location">Post it in a physical location e.g.
                                campus notice board</label>
                            <textarea class="form-control mt-2" id="physical-location-details"
                                name="physical-location-details" rows="2" placeholder="Specify details here..."
                                style="display: none;"></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="recruitment-method" value="other"
                                id="other-recruitment" onclick="toggleTextarea('other-details')">
                            <label class="form-check-label" for="other-recruitment">Other</label>
                            <textarea class="form-control mt-2" id="other-details" name="other-details" rows="2"
                                placeholder="Specify details here..." style="display: none;"></textarea>
                        </div>
                    </div>
                </fieldset>

                <br>

                <!-- Section 2.8 - Addressing Participant Vulnerability -->
                <fieldset class="fieldset">
                    <legend>2.8 Addressing participant vulnerability – if your participants fall into any of the
                        following categories, please check the relevant tick box/boxes and state below what special
                        arrangements will be made to protect them:</legend>
                    <div class="form-group">
                        <label><i>If your participants are not in any of these categories, tick N/A</i></label>
                        <br><br>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability" value="n/a" id="n/a">
                            <label class="form-check-label" for="n/a">N/A</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability" value="children"
                                id="children" onclick="toggleChildInvolvementSection()">
                            <label class="form-check-label" for="children">Children under 18 years of age</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability"
                                value="unequal-relationships" id="unequal-relationships">
                            <label class="form-check-label" for="unequal-relationships">Persons in unequal relationships
                                with the researcher (e.g. lecturer-student, therapist-client, employer-employee)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability" value="impairment"
                                id="impairment">
                            <label class="form-check-label" for="impairment">People with a recognized or diagnosed
                                intellectual, physical, or mental impairment</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability" value="institutions"
                                id="institutions">
                            <label class="form-check-label" for="institutions">People confined to institutions (e.g.
                                prisoners, residents in 24 hr nursing facilities)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability"
                                value="traumatic-events" id="traumatic-events">
                            <label class="form-check-label" for="traumatic-events">People who have undergone traumatic
                                or adverse emotional events</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability"
                                value="cognitive-ability" id="cognitive-ability">
                            <label class="form-check-label" for="cognitive-ability">People with diminished cognitive
                                ability</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability" value="marginalized"
                                id="marginalized">
                            <label class="form-check-label" for="marginalized">Marginalized sections of society</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="vulnerability" value="other"
                                id="other-vulnerability" onclick="toggleTextarea('other-vulnerability-details')">
                            <label class="form-check-label" for="other-vulnerability">Other (please specify)</label>
                            <textarea class="form-control mt-2" id="other-vulnerability-details"
                                name="other-vulnerability-details" rows="5" cols="50" style="display: none;"
                                placeholder="Special arrangements:"></textarea>
                        </div><br>

                    </div>
                </fieldset>
                <br>
                <!-- Section 2.9 - Involvement of Children under 18 -->
                <fieldset class="fieldset" id="child-involvement-section" style="display: none;">
                    <legend>2.9 Involvement of Children under 18 years of age: if your participants are in this
                        category, please confirm compliance with the following:</legend>
                    <label><i>If your participants are not in this category, tick N/A</i></label>
                    <div class="form-group">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="children-compliance" value="na"
                                id="children-na">
                            <label class="form-check-label" for="children-na">N/A</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="children-compliance"
                                value="child-protection-policy" id="child-protection-policy">
                            <label class="form-check-label" for="child-protection-policy">We confirm that we have read
                                and agree to act in accordance with the DCU Child Protection policy and procedures (as
                                per <a href="https://www.dcu.ie/ocoo/child-protection" target="_blank">DCU Child
                                    Protection Unit webpage</a>)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="children-compliance"
                                value="safeguards" id="safeguards">
                            <label class="form-check-label" for="safeguards">We confirm that we have put in place
                                safeguards for the children participating in the research.</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="children-compliance" value="supports"
                                id="supports">
                            <label class="form-check-label" for="supports">We confirm that we have supports in place for
                                children who may disclose current or historical abuse (whether or not this is the focus
                                of the research)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="children-compliance"
                                value="requirements" id="requirements">
                            <label class="form-check-label" for="requirements">We confirm that all requirements will be
                                met prior to commencing the research (e.g. TUSLA Children First Training completed,
                                Garda Vetting in place)</label>
                        </div>
                    </div>
                </fieldset>
                <br>

                <!-- Section 2.10 - Dissemination of Results -->
                <fieldset class="fieldset">
                    <legend>2.10 Please confirm how the results of the research will be disseminated:</legend>
                    <div class="form-group">
                        <label for="dissemination"><i>In line with encouraging institutional Open Research practices,
                                please note that the use of open access publishing is recommended. Further information
                                on this is available via <a href="https://www.dcu.ie/library/open-research-open-access"
                                    target="_blank">https://www.dcu.ie/library/open-research-open-access</a><br><br>Please
                                include a statement on whether the participants will be provided with any information as
                                to the findings or outcomes of the project</i></label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="dissemination-method" value="website"
                                id="website-dissemination" onclick="toggleTextarea('website-details')">
                            <label class="form-check-label" for="website-dissemination">Posted on a website</label>
                            <textarea class="form-control mt-2" id="website-details" name="website-details" rows="2"
                                placeholder="Specify details here..." style="display: none;"></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="dissemination-method"
                                value="social-media" id="social-media" onclick="toggleTextarea('social-media-details')">
                            <label class="form-check-label" for="social-media">Shared on social media</label>
                            <textarea class="form-control mt-2" id="social-media-details" name="social-media-details"
                                rows="2" placeholder="Specify details here..." style="display: none;"></textarea>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="dissemination-method"
                                value="not-shared" id="not-shared">
                            <label class="form-check-label" for="not-shared">Will not be shared</label>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="dissemination-method" value="other"
                                id="dissemination-other" onclick="toggleTextarea('dissemination-other-details')">
                            <label class="form-check-label" for="dissemination-other">Other</label>
                            <textarea class="form-control mt-2" id="dissemination-other-details"
                                name="dissemination-other-details" rows="2" placeholder="Specify details here..."
                                style="display: none;"></textarea>
                        </div>

                    </div>
                </fieldset>
                <br>

                <!-- Button to Previous and Next step -->
                <div class="buttons">
                    <!-- Previous Button -->
                    <button type="button" class="btn btn-secondary" onclick="history.back();">Previous</button>

                    <!-- Next Page Button -->
                    <button type="submit" class="btn btn-primary">Next Page</button>
                </div>

            </form>
        </div>
    </div>
    <br><br>

    <!-- Bootstrap JS CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        // Function to save checkbox data to localStorage
        function saveCheckboxData() {
            const checkboxes = document.querySelectorAll("input[type='checkbox']");
            checkboxes.forEach(checkbox => {
                localStorage.setItem(checkbox.id, checkbox.checked);
            });
        }

        // Populate form data when the document is loaded
        document.addEventListener('DOMContentLoaded', () => {
            populateFormData();
        });

        // Modified form submission to include saving data before proceeding
        document.getElementById('designMethodologyForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent form submission to handle redirection with JavaScript
            if (validateForm()) { // Call the validateForm function before saving data
                saveCheckboxData(); // Save checkbox data
                saveFormData();
                window.location.href = 'page_3.html';
            }
        });

        // Function to validate form fields before submission
        function validateForm() {
            // Get all required textarea fields
            const requiredFields = document.querySelectorAll("textarea[required]");
            // Loop through each required field
            for (let field of requiredFields) {
                // Check if field is empty
                if (field.value.trim() === "") {
                    // If empty, show alert and focus on the field
                    alert("Please fill all the required fields.");
                    field.focus();
                    return false; // Prevent form submission
                }
            }

            // Check if at least one checkbox in Section 2.1 is selected
            const section21Checkboxes = document.querySelectorAll("input[name='project-category']:checked");
            if (section21Checkboxes.length === 0) {
                alert("Please select at least one technology involved in the project in Section 2.1.");
                return false;
            }

            // Check if at least one checkbox in Section 2.5 is selected
            const section25Checkboxes = document.querySelectorAll("input[name='data-collection']:checked");
            if (section25Checkboxes.length === 0) {
                alert("Please select at least one data collection method in Section 2.5.");
                return false;
            }

            // Check if "Other" is selected in Section 2.5 and the corresponding textarea is filled
            const otherDataCollection = document.getElementById("other-data-collection");
            if (otherDataCollection.checked) {
                const otherDataCollectionDetails = document.getElementById("other-data-collection-details");
                if (otherDataCollectionDetails.value.trim() === "") {
                    alert("Please fill out the details for the 'Other' data collection method in Section 2.5.");
                    otherDataCollectionDetails.focus();
                    return false;
                }
            }

            // Check if at least one checkbox in Section 2.6a is selected
            const section26aCheckboxes = document.querySelectorAll("input[name='participants-group']:checked");
            if (section26aCheckboxes.length === 0) {
                alert("Please select at least one participant group in Section 2.6a.");
                return false;
            }

            // Check if at least one checkbox in Section 2.6b is selected
            const section26bCheckboxes = document.querySelectorAll("input[name='participants-age']:checked");
            if (section26bCheckboxes.length === 0) {
                alert("Please select at least one age range in Section 2.6b.");
                return false;
            }

            // Check if at least one checkbox in Section 2.6c is selected
            const section26cCheckboxes = document.querySelectorAll("input[name='choosing-demographics']:checked");
            if (section26cCheckboxes.length === 0) {
                alert("Please select at least one demographic characteristic in Section 2.6c.");
                return false;
            }

            // Check if all corresponding textareas for Section 2.6c are filled if needed
            let section26cValid = true;
            section26cCheckboxes.forEach(checkbox => {
                const textarea = document.getElementById(`${checkbox.id}-details`);
                if (textarea && textarea.style.display === 'block' && textarea.value.trim() === "") {
                    section26cValid = false;
                    textarea.focus();
                }
            });

            if (!section26cValid) {
                alert("Please fill out the details for all selected demographic characteristics in Section 2.6c that require additional information.");
                return false;
            }

            // Check if at least one checkbox in Section 2.7 is selected and its corresponding textarea is filled
            const section27Checkboxes = document.querySelectorAll("input[name='recruitment-method']:checked");
            if (section27Checkboxes.length === 0) {
                alert("Please select at least one recruitment method in Section 2.7 and provide the corresponding details.");
                return false;
            }

            let allTextareasFilled = true;
            section27Checkboxes.forEach(checkbox => {
                const textarea = document.getElementById(`${checkbox.id}-details`);
                if (textarea && textarea.value.trim() === "") {
                    allTextareasFilled = false;
                    textarea.focus();
                }
            });

            if (!allTextareasFilled) {
                alert("Please fill out the details for all selected recruitment methods.");
                return false;
            }

            // Check if at least one checkbox in Section 2.8 is selected and its corresponding textarea is filled if "Other" is selected
            const section28Checkboxes = document.querySelectorAll("input[name='vulnerability']:checked");
            if (section28Checkboxes.length === 0) {
                alert("Please select at least one participant vulnerability category in Section 2.8.");
                return false;
            }

            let section28Valid = true;
            section28Checkboxes.forEach(checkbox => {
                if (checkbox.id === "other-vulnerability") {
                    const textarea = document.getElementById("other-vulnerability-details");
                    if (textarea && textarea.value.trim() === "") {
                        section28Valid = false;
                        textarea.focus();
                    }
                }
            });

            if (!section28Valid) {
                alert("Please fill out the special arrangements for the selected 'Other' vulnerability category.");
                return false;
            }

            // Check if at least one checkbox in Section 2.10 is selected and its corresponding textarea is filled if needed
            const section210Checkboxes = document.querySelectorAll("input[name='dissemination-method']:checked");
            if (section210Checkboxes.length === 0) {
                alert("Please select at least one dissemination method in Section 2.10.");
                return false;
            }

            let section210Valid = true;
            section210Checkboxes.forEach(checkbox => {
                const textarea = document.getElementById(`${checkbox.id}-details`);
                if (textarea && textarea.style.display === 'block' && textarea.value.trim() === "") {
                    section210Valid = false;
                    textarea.focus();
                }
            });

            if (!section210Valid) {
                alert("Please fill out the details for all selected dissemination methods that require additional information.");
                return false;
            }

            return true;
        }

        // Function to toggle display of child involvement section based on checkbox status
        function toggleChildInvolvementSection() {
            const childrenCheckbox = document.getElementById('children');
            const childInvolvementSection = document.getElementById('child-involvement-section');
            if (childrenCheckbox.checked) {
                // If checkbox is checked, show child involvement section
                childInvolvementSection.style.display = 'block';
            } else {
                // If checkbox is unchecked, hide child involvement section
                childInvolvementSection.style.display = 'none';
            }
        }

        // Function to toggle display of other data collection details based on checkbox status
        function toggleTextarea(textareaId) {
            const textarea = document.getElementById(textareaId);
            if (textarea) {
                if (textarea.style.display === 'none') {
                    textarea.style.display = 'block';
                } else {
                    textarea.style.display = 'none';
                }
            }
        }

        // Load saved data from localStorage when the page loads
        window.onload = function () {
            populateFormData();
        };

        // Function to save form data to localStorage
        function saveFormData() {
            const formData = new FormData(document.getElementById('designMethodologyForm'));
            // Save each value to localStorage
            formData.forEach((value, key) => {
                localStorage.setItem(key, value);
            });
        }

        // Function to populate form with data from localStorage
        function populateFormData() {
            const savedData = Object.keys(localStorage).reduce((data, key) => {
                data[key] = localStorage.getItem(key);
                return data;
            }, {});

            for (const key in savedData) {
                if (savedData.hasOwnProperty(key)) {
                    const element = document.querySelector(`[name="${key}"]`);
                    if (element) {
                        if (element.type === 'checkbox' || element.type === 'radio') {
                            element.checked = savedData[key] === 'true';
                        } else {
                            element.value = savedData[key];
                        }
                    }
                }
            }
        }
    </script>

</body>

</html>